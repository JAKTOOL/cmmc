(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[78],{93:(e,t,r)=>{"use strict";r.d(t,{SecurityRequirements:()=>A});var s=r(5155),l=r(6236),n=r(5383),i=r(8947),a=r(5695),o=r(2115),d=r(170),u=r(8870),c=r(6874),m=r.n(c),x=r(2932);let v=e=>{let{rows:t}=e;return(0,s.jsx)("dl",{className:"flex flex-row",children:t.reduce((e,t,r)=>(void 0!==t.visible&&t.visible&&e.push((0,s.jsxs)("div",{className:t.className||"",children:[(0,s.jsx)("dt",{className:"text-xs text-gray-700 uppercase bg-gray-50 text-gray-700 border-gray-100 py-2 px-4 text-left border-r-2 border-b-2",children:t.title}),(0,s.jsx)("dd",{className:"text-xs text-gray-500 bg-white border-gray-200 py-2 px-4",children:t.value})]},r)),e),[])})};var h=r(8202),p=r(3437),f=r(2954),b=r(6616);let g=e=>new Promise((t,r)=>{let s=new FileReader;s.onload=()=>t(s.result),s.onerror=e=>r(e),s.readAsArrayBuffer(e)}),j=e=>{let{requirementId:t,setUploading:r,uploading:l}=e,i=async e=>{var s;if(r(!0),null==e?void 0:null===(s=e.target)||void 0===s?void 0:s.files){for(let r of e.target.files){let e=await g(r),s={uuid:window.crypto.randomUUID(),filename:r.name,type:r.type,data:e,requirement_id:t};await n.Iq.evidence.put(s)}r(!1)}};return(0,s.jsxs)("label",{htmlFor:"evidence",className:"flex flex-col items-center justify-center  border-2 border-gray-300 border-dashed rounded-lg cursor-pointer bg-gray-50 hover:bg-gray-100",children:[(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center pt-5 pb-6",children:[(0,s.jsx)("svg",{className:"w-8 h-8 mb-4 text-gray-500","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 20 16",children:(0,s.jsx)("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13 13h3a3 3 0 0 0 0-6h-.025A5.56 5.56 0 0 0 16 6.5 5.5 5.5 0 0 0 5.207 5.021C5.137 5.017 5.071 5 5 5a4 4 0 0 0 0 8h2.167M10 15V6m0 0L8 8m2-2 2 2"})}),(0,s.jsxs)("p",{className:"mb-2 text-sm text-gray-500 p-2",children:["Click or drop evidence for ",t]})]}),(0,s.jsx)("input",{id:"evidence",type:"file",className:"hidden",multiple:!0,onChange:i,disabled:l})]})},w=e=>{let{artifact:t,setEvidence:r,evidence:l}=e,i=async()=>{await n.Iq.evidence.delete(IDBKeyRange.only(t.uuid))&&r(l.filter(e=>e.uuid!==t.uuid))};return(0,s.jsxs)("span",{className:"flex shrink items-center max-h-[20px] bg-blue-100 text-blue-800 border border-blue-200 text-xs font-medium me-2 mb-2 px-2.5 py-0.5 rounded-sm",children:[(0,s.jsx)("span",{className:"border-r border-blue-200 pr-2",title:"".concat(t.data.byteLength," bytes | ").concat(t.type),children:t.filename}),(0,s.jsx)("button",{onClick:i,className:"pl-2",children:(0,s.jsx)("svg",{className:"w-2 h-2","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 14 14",children:(0,s.jsx)("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"m1 1 6 6m0 0 6 6M7 7l6-6M7 7l-6 6"})})})]})},y=e=>{let{evidence:t,setEvidence:r}=e;return null==t?void 0:t.map(e=>(0,s.jsx)(w,{artifact:e,evidence:t,setEvidence:r},e.uuid))};async function N(e,t){t(await n.Iq.evidence.getAll(IDBKeyRange.only(e),"requirement_id"))}let q=e=>{let{requirementId:t}=e,[r,l]=(0,o.useState)([]),[n,i]=(0,o.useState)(!1);return(0,o.useEffect)(()=>{n||N(t,l)},[t,n]),(0,s.jsxs)("section",{className:"flex flex-col md:flex-row shrink mb-4 -translate-y-[36px]",children:[(0,s.jsx)("div",{className:"basis-full mb-4 md:mb-0 md:basis-1/3 md:mr-4",children:(0,s.jsx)(j,{requirementId:t,setUploading:i,uploading:n})}),(0,s.jsx)("div",{className:"flex flex-wrap shrink basis-full md:basis-2/3 content-start",children:(0,s.jsx)(y,{evidence:r,setEvidence:l})})]})},S=e=>{let{children:t,debouncedSave:r,formAction:l,isHydrating:n,lastSaved:i,next:a,prev:o,requirement:d}=e;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(b.o,{previous:o,next:a}),(0,s.jsxs)("div",{className:"sticky top-36 left-full flex flex-row-reverse items-center shrink-0 w-1/4 pb-4 z-20 -translate-y-full",children:[(0,s.jsx)("button",{type:"submit",className:"shrink w-24 bg-green-500 hover:bg-green-400 text-white font-bold py-2 px-4 border-b-4 border-green-700 hover:border-green-500 rounded disabled:bg-slate-50 disabled:text-slate-500 disabled:border-slate-200 disabled:shadow-none",disabled:n,tabIndex:30,form:d.element_identifier,children:"Save"}),i&&(0,s.jsxs)("span",{className:"text-sm text-gray-500 mr-2 text-right hidden md:block",children:["Last saved: ",null==i?void 0:i.toLocaleTimeString()]})]}),(0,s.jsxs)("form",{id:d.element_identifier,action:l,onChange:r,className:"basis-full",children:[(0,s.jsx)(q,{requirementId:d.element_identifier}),t]})]})},k=e=>{let{id:t,defaultValue:r,isPending:l}=e,[n,i]=(0,o.useState)(!!r),a=(0,o.useRef)(null),d=(0,o.useMemo)(()=>()=>!n&&i(!0),[n]),u=(0,o.useMemo)(()=>()=>{if(null==a?void 0:a.current){var e;null==a||null===(e=a.current)||void 0===e||e.dispatchEvent(new Event("change",{bubbles:!0})),d()}},[a,d]);return(0,s.jsxs)("div",{onBlur:u,onClick:d,onKeyUp:d,children:[(0,s.jsxs)("select",{id:t,name:t,ref:a,className:"h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-base shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",disabled:l,defaultValue:r,tabIndex:20,children:[(0,s.jsx)("option",{value:"not-implemented",children:"Not Implemented"}),(0,s.jsx)("option",{value:"implemented",children:"Implemented"}),(0,s.jsx)("option",{value:"not-applicable",children:"Not Applicable"}),(0,s.jsx)("option",{value:"not-started",children:"Not Started"})]},"".concat(t,"-").concat(l)),!n&&(0,s.jsx)("input",{type:"hidden",name:t,value:r})]})},R=e=>{let{securityRequirement:t,initialState:r,isPending:l}=e,n="".concat(t.subSubRequirement,".status");return(0,s.jsxs)("div",{className:"flex flex-col md:mr-2 lg:mr-4",children:[(0,s.jsx)("label",{htmlFor:n,className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70 my-2",children:"Status"}),(0,s.jsx)(k,{id:n,isPending:l,defaultValue:r[n]})]},n)},I=e=>{var t,r,l,n;let{securityRequirement:a,initialState:d,isPending:u}=e,c="".concat(a.subSubRequirement,".description"),m=(0,o.useRef)(null),x=(0,o.useRef)(null),v=(0,o.useRef)(null),[h,p]=(0,o.useState)(!0),[f,b]=(0,o.useState)(d[c]),g=(0,o.useMemo)(()=>()=>{var e;p(!1),null==m||null===(e=m.current)||void 0===e||e.focus()},[]),j=(0,o.useMemo)(()=>async()=>{if((null==x?void 0:x.current)&&(null==m?void 0:m.current)){var e;p(!0),x.current.innerHTML=await (0,i.xI)(null==m?void 0:null===(e=m.current)||void 0===e?void 0:e.value)}},[]);return(0,o.useEffect)(()=>{(async()=>{h&&f!==d[c]&&(b(d[c]),await j())})()},[f,d]),(0,o.useEffect)(()=>((null==m?void 0:m.current)&&(m.current.addEventListener("focus",g),m.current.addEventListener("blur",j)),v.current&&v.current.addEventListener("click",g),()=>{(null==m?void 0:m.current)&&(m.current.removeEventListener("focus",g),m.current.removeEventListener("blur",j)),v.current&&v.current.removeEventListener("click",g)}),[m,x]),(0,s.jsxs)("div",{className:"flex flex-col grow w-full lg:w-10/12",ref:v,children:[(0,s.jsx)("label",{htmlFor:c,className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70 my-2",children:"Description"}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("textarea",{ref:m,tabIndex:20,name:c,id:c,className:"min-h-32 grow z-0 w-full rounded-md border border-input bg-transparent px-3 py-3 text-base shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm ".concat(h&&(null==m?void 0:null===(t=m.current)||void 0===t?void 0:t.value)?"absolute opacity-0":""),disabled:u,defaultValue:d[c],style:{height:(null==x?void 0:null===(r=x.current)||void 0===r?void 0:r.offsetHeight)?"".concat(null==x?void 0:null===(l=x.current)||void 0===l?void 0:l.offsetHeight,"px"):"auto"}}),(0,s.jsx)("div",{ref:x,tabIndex:-1,className:"min-h-32 relative z-10 md-output w-full rounded-md border border-input bg-white px-3 py-3 text-base shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm ".concat(h&&(null==m?void 0:null===(n=m.current)||void 0===n?void 0:n.value)?"":"hidden")})]})]})},_=e=>{let{securityRequirement:t,initialState:r,isPending:l,idx:n}=e;return(0,s.jsx)("li",{className:"mb-6",children:(0,s.jsxs)("fieldset",{className:"flex flex-col grow",children:[(0,s.jsxs)("legend",{className:"text-2xl flex flex-row items-center text-left",children:[(0,s.jsx)(f.oZ,{status:r["".concat(t.subSubRequirement,".status")]}),(0,s.jsx)("h4",{id:t.subSubRequirement,children:t.subSubRequirement})]}),(0,s.jsx)("p",{className:"text-lg my-2",children:t.text}),(0,s.jsxs)("div",{className:"flex flex-col md:flex-row",children:[(0,s.jsx)(R,{securityRequirement:t,initialState:r,isPending:l,idx:n}),(0,s.jsx)(I,{securityRequirement:t,initialState:r,isPending:l})]})]})})},L=async(e,t)=>{var r,s;let l={};for(let[e,r]of t.entries()){let t=e.lastIndexOf("."),s=e.substring(0,t),n=e.substring(t+1);l[s]={...(null==l?void 0:l[s])||{},[n]:r}}for(let[e,t]of Object.entries(l))await (null===(s=n.Iq.securityRequirements)||void 0===s?void 0:s.put({id:e,...t}));let i=[];return await (null===(r=n.Iq.requirements)||void 0===r?void 0:r.put({id:e,bySecurityRequirementId:Object.entries(l).reduce((e,t)=>{let[r,s]=t;return e[r]=s.status,i.push(s.status),e},{})})),i},E=e=>{var t;let{requirement:r,initialState:l,setInitialState:n,groupings:i,isHydrating:a,setStatuses:d,prev:u,next:c}=e,[m,x]=(0,o.useState)(null);async function v(e,t){d(await L(r.id,t)),n(Object.fromEntries(t.entries())),x(new Date)}let h=(0,o.useMemo)(()=>(function(e,t){let r;return function(){for(var s=arguments.length,l=Array(s),n=0;n<s;n++)l[n]=arguments[n];r&&clearTimeout(r),r=setTimeout(()=>{e.apply(this,l)},t)}})(async e=>{var t;if(!(null===(t=e.target)||void 0===t?void 0:t.form))return;let r=new FormData(e.target.form);await v(null,r)},250),[r.id,d,n]),[p,f,b]=(0,o.useActionState)(v,l);return(0,s.jsx)(S,{debouncedSave:h,formAction:f,isHydrating:a,lastSaved:m,next:c,prev:u,requirement:r,children:(0,s.jsx)(s.Fragment,{children:null===(t=Object.entries(i))||void 0===t?void 0:t.map((e,t)=>{let[r,n]=e;return(0,s.jsx)("ol",{children:n.map(e=>(0,s.jsx)(_,{securityRequirement:e,initialState:l,isPending:b||a,idx:t},e.element_identifier))},r)})})})},M=e=>{var t,r,l,n,i,a,o,d;let{groupings:c,initialState:b,isHydrating:g,manifest:j,next:w,prev:y,requirement:N,requirementId:q,setInitialState:S,setStatuses:k,statuses:R,value:I}=e;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(x.B,{requirementId:q}),(0,s.jsxs)("h3",{className:"text-3xl block sm:flex mt-6 items-center",children:["Security Requirements for ",N.requirement," ",N.title,(0,s.jsx)(f.oZ,{statuses:R})]}),(0,s.jsx)("p",{className:"text-base discussion",dangerouslySetInnerHTML:{__html:(null===(r=j.discussions.byRequirements[q])||void 0===r?void 0:null===(t=r[0])||void 0===t?void 0:t.text)||""}}),(0,s.jsxs)("aside",{className:"flex flex-wrap justify-between items-center w-full mx-auto",children:[(0,s.jsx)("div",{className:"flex mb-4 sm:mb-1",children:(0,s.jsxs)("a",{href:"https://csrc.nist.gov/projects/cprt/catalog#/cprt/framework/version/SP_800_171_3_0_0/home?element=".concat(N.id),target:"_blank",rel:"noreferrer",className:"text-xs text-gray-600",children:["View CPRT ",N.id]})}),(0,s.jsx)(v,{rows:[{title:(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("button",{popoverTarget:"revision-popover",className:"uppercase flex items-center",children:[(0,s.jsx)("span",{className:"mr-2",children:"Revision"})," ",(0,s.jsx)(h.G,{})]}),(0,s.jsxs)(p.A,{id:"revision-popover",children:[(0,s.jsx)(h.G,{}),(0,s.jsx)("span",{children:"What NIST 800-171 revision(s) this control appears in."})]})]}),visible:null==I?void 0:null===(l=I.revision)||void 0===l?void 0:l.length,value:null==I?void 0:null===(n=I.revision)||void 0===n?void 0:n.join(", ")},{title:(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("button",{popoverTarget:"value-popover",className:"uppercase flex items-center",children:[(0,s.jsx)("span",{className:"mr-2",children:"Value"})," ",(0,s.jsx)(h.G,{})]}),(0,s.jsxs)(p.A,{id:"value-popover",children:[(0,s.jsx)(h.G,{}),(0,s.jsx)("span",{children:"The value this control has currently in CMMC."})]})]}),visible:!0,value:null==I?void 0:I.value},{title:"Partial Value",visible:(null!==(d=null==I?void 0:I.partial_value)&&void 0!==d?d:0)>0,value:null==I?void 0:I.partial_value},{title:(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("button",{popoverTarget:"deprecated-popover",className:"uppercase flex items-center",children:[(0,s.jsx)("span",{className:"mr-2",children:"Deprecates"})," ",(0,s.jsx)(h.G,{})]}),(0,s.jsxs)(p.A,{id:"deprecated-popover",children:[(0,s.jsx)(h.G,{}),(0,s.jsx)("span",{children:"This security requirement incorporates the following controls from revision 2."})]})]}),visible:!!(null==I?void 0:null===(i=I.withdrawn_from)||void 0===i?void 0:i.length),className:"hidden md:inline",value:null==I?void 0:null===(a=I.withdrawn_from)||void 0===a?void 0:a.map(e=>(0,s.jsx)(m(),{href:"/r3/requirement/".concat(e),className:"text-xs mr-2",children:e},e))},{title:(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("button",{popoverTarget:"deprecated-value-popover",className:"uppercase flex items-center",children:[(0,s.jsx)("span",{className:"mr-2",children:"Deprecated Value"})," ",(0,s.jsx)(h.G,{})]}),(0,s.jsxs)(p.A,{id:"deprecated-value-popover",children:[(0,s.jsx)(h.G,{}),(0,s.jsx)("span",{children:"This is the aggregate value of all controls this security requirement has incorporated. It is an estimate until CMMC is updated to use 800-171 revision 3."})]})]}),visible:!!(null==I?void 0:null===(o=I.withdrawn_from)||void 0===o?void 0:o.length),value:(0,u.k)(null==I?void 0:I.aggregate_value_withdrawn_from)}]})]}),(0,s.jsx)("section",{className:"w-full flex flex-col",children:(0,s.jsx)(E,{requirement:N,groupings:c,initialState:b,setInitialState:S,isHydrating:g,setStatuses:k,prev:y,next:w})})]})},C=/\d{2}.\d{2}.\d{2},?/gm,T=e=>{let{text:t}=e;if(C.test(t)){var r;return[t.replaceAll(C,"").replace("and","").replace(".",""),...null===(r=t.match(C))||void 0===r?void 0:r.map(e=>{let t=e.replace(",","");return(0,s.jsx)(m(),{href:"/r3/requirement/".concat(t),className:"text-xs mr-1",children:e},t)})]}return t},F=e=>{var t,r,l,n,i,a,o;let{initialState:d,isHydrating:u,manifest:c,next:m,prev:b,requirement:g,requirementId:j,setInitialState:w,setStatuses:y,statuses:N,value:q,withdrawn:S,groupings:k}=e;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(x.B,{requirementId:j}),(0,s.jsxs)("h3",{className:"text-3xl mt-6 block sm:flex items-center",children:["Security Requirements for ",g.requirement,(0,s.jsx)(f.oZ,{statuses:N})]}),(0,s.jsxs)("div",{id:"alert-additional-content-5",className:"p-4 border border-yellow-100 text-yellow-800  rounded-lg bg-yellow-50 ",role:"alert",children:[(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)(h.G,{}),(0,s.jsx)("span",{className:"sr-only",children:"Info"}),(0,s.jsx)("h3",{className:"text-lg font-sm text-gray-800 ",children:"Withdrawn"})]}),(0,s.jsx)("div",{className:"mt-2 mb-4 text-xs text-gray-800",children:(0,s.jsx)("p",{className:"mb-2",children:"This security requirement has been withdrawn from NIST-SP 800-171 revision 3, but is retained as CMMC is using revision 2."})})]}),(0,s.jsx)("p",{className:"text-base discussion",dangerouslySetInnerHTML:{__html:(null===(r=c.discussions.byRequirements[j])||void 0===r?void 0:null===(t=r[0])||void 0===t?void 0:t.text)||""}}),(0,s.jsxs)("aside",{className:"flex flex-wrap justify-between items-center w-full mx-auto",children:[(0,s.jsx)("div",{className:"flex mb-4 sm:mb-1",children:(0,s.jsxs)("a",{href:"https://csrc.nist.gov/projects/cprt/catalog#/cprt/framework/version/SP_800_171_3_0_0/home?element=".concat(g.id),target:"_blank",rel:"noreferrer",className:"text-xs text-gray-600",children:["View CPRT ",g.id]})}),(0,s.jsx)(v,{rows:[{title:(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("button",{popoverTarget:"revision-popover",className:"uppercase flex items-center",children:[(0,s.jsx)("span",{className:"mr-2",children:"Revision"})," ",(0,s.jsx)(h.G,{})]}),(0,s.jsxs)(p.A,{id:"revision-popover",children:[(0,s.jsx)(h.G,{}),(0,s.jsx)("span",{children:"What NIST 800-171 revision(s) this control appears in."})]})]}),visible:null==q?void 0:null===(l=q.revision)||void 0===l?void 0:l.length,value:null==q?void 0:null===(n=q.revision)||void 0===n?void 0:n.join(", ")},{title:(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("button",{popoverTarget:"value-popover",className:"uppercase flex items-center",children:[(0,s.jsx)("span",{className:"mr-2",children:"Value"})," ",(0,s.jsx)(h.G,{})]}),(0,s.jsxs)(p.A,{id:"value-popover",children:[(0,s.jsx)(h.G,{}),(0,s.jsx)("span",{children:"The value this control has currently in CMMC."})]})]}),visible:!0,value:null==q?void 0:q.value},{title:"Partial Value",visible:(null!==(o=null==q?void 0:q.partial_value)&&void 0!==o?o:0)>0,value:null==q?void 0:q.partial_value},{title:(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("button",{popoverTarget:"deprecated-value-popover",className:"uppercase flex items-center",children:[(0,s.jsx)("span",{className:"mr-2",children:"Withdrawn Reason"})," ",(0,s.jsx)(h.G,{})]}),(0,s.jsxs)(p.A,{id:"deprecated-value-popover",children:[(0,s.jsx)(h.G,{}),(0,s.jsx)("span",{children:"Why this security control was withdrawn."})]})]}),visible:!0,className:"hidden md:block",value:(0,s.jsx)(T,{text:null==S?void 0:null===(a=S[0])||void 0===a?void 0:null===(i=a.element)||void 0===i?void 0:i.text})}]})]}),(0,s.jsx)("section",{className:"w-full flex flex-col",children:(0,s.jsx)(E,{requirement:g,initialState:d,setInitialState:w,isHydrating:u,setStatuses:y,prev:b,next:m,groupings:k})})]})};i.xI.use({async:!0,pedantic:!1,gfm:!0,breaks:!0});let A=e=>{let{requirementId:t}=e,[r,i]=(0,o.useState)({}),[u,c]=(0,o.useState)(!1),[m,x]=(0,o.useState)([]),v=(0,l.u2)(),h=(0,a.useRouter)(),p=(0,d.S)(t),f=v.withdrawReason.byRequirements[t],b=(0,o.useMemo)(()=>(null==v?void 0:v.securityRequirements.byRequirements[t])||[],[v,t]),g=(0,o.useMemo)(()=>(null==v?void 0:v.requirements.byId[t])||null,[v,t]),j=(0,o.useMemo)(()=>{let e={};for(let t of b)t.text&&(e[t.subRequirement]||(e[t.subRequirement]=[]),e[t.subRequirement].push(t));return e},[b]),[w,y]=(0,o.useMemo)(()=>{let e=(null==v?void 0:v.requirements.byFamily[null==g?void 0:g.family])||[],r=e.findIndex(e=>e.id===t),s=e[r-1],l=e[r+1];if(!s||!l){var n,i,a;let e=v.families.elements,t=e.findIndex(e=>e.id===g.family);if(!s){let r=null==e?void 0:null===(n=e[t-1])||void 0===n?void 0:n.id,l=v.requirements.byFamily[r];s=null==l?void 0:l[(null==l?void 0:l.length)-1]}if(!l){let r=null==e?void 0:null===(i=e[t+1])||void 0===i?void 0:i.id;l=null===(a=v.requirements.byFamily[r])||void 0===a?void 0:a[0]}}return[s,l]},[g,t,v]);return((0,o.useEffect)(()=>{(async function(){c(!0);let e=b.map(e=>e.subSubRequirement),t=await n.Iq.securityRequirements.getAll(IDBKeyRange.bound(e[0],e[e.length-1])),r=[],s=null==t?void 0:t.reduce((e,t)=>(e["".concat(t.id,".status")]=t.status,e["".concat(t.id,".description")]=t.description,r.push(t.status),e),{});x(r),i(s),c(!1)})()},[t,i,b,x,c]),(0,o.useEffect)(()=>{let e=e=>{let t=new URL("".concat(window.location.origin,"/").concat(e.newURL.split("#")[1]));t.searchParams.get("element")&&(history.replaceState(null,"",window.location.pathname+window.location.search),h.push("/r3/requirement/".concat(t.searchParams.get("element"))))};window.addEventListener("hashchange",e);let t=e=>{if(e.ctrlKey&&"s"===e.key){var t;e.preventDefault();let r=null===(t=document.forms)||void 0===t?void 0:t[0];null==r||r.requestSubmit()}};return document.addEventListener("keydown",t),()=>{window.removeEventListener("hashchange",e),document.removeEventListener("keydown",t)}},[h]),f)?(0,s.jsx)(F,{groupings:j,initialState:r,isHydrating:u,manifest:v,next:y,prev:w,requirement:g,requirementId:t,setInitialState:i,setStatuses:x,statuses:m,value:p,withdrawn:f}):(null==b?void 0:b.length)?(0,s.jsx)(M,{groupings:j,initialState:r,isHydrating:u,manifest:v,next:y,prev:w,requirement:g,requirementId:t,setInitialState:i,setStatuses:x,statuses:m,value:p}):null}},4974:(e,t,r)=>{Promise.resolve().then(r.bind(r,7149)),Promise.resolve().then(r.bind(r,93)),Promise.resolve().then(r.bind(r,6236))},6616:(e,t,r)=>{"use strict";r.d(t,{o:()=>d});var s=r(5155),l=r(6874),n=r.n(l),i=r(2115);let a=e=>null==e?void 0:e.requirement;function o(e){let t=e.getBoundingClientRect();return t.top>=82&&t.left>=0&&t.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&t.right<=(window.innerWidth||document.documentElement.clientWidth)}let d=e=>{let{previous:t,next:r,elementType:l="requirement",elementIdentity:d=a}=e,u=(0,i.useRef)(null),c=(0,i.useRef)(null),m="rounded-r-lg rounded-l-lg";t&&(m="rounded-r-lg");let x="rounded-r-lg rounded-l-lg";r&&(x="rounded-l-lg border-r"),(0,i.useEffect)(()=>{c.current&&o(c.current)?c.current.focus():u.current&&o(u.current)&&u.current.focus()},[u,c]);let v=d(t),h=d(r);return(0,s.jsxs)("aside",{className:"w-5/6 flex flex-row mb-4",children:[t&&(0,s.jsxs)(n(),{href:"/r3/".concat(l,"/").concat(v),className:"flex flex-row items-center bg-gray-200 text-gray-700 border-gray-400 py-2 px-4 border-b-4 hover:bg-gray-300 ".concat(x),tabIndex:10,ref:u,children:[(0,s.jsx)("svg",{className:"w-6 h-6 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 19l-7-7 7-7"})}),(0,s.jsxs)("span",{className:"mr-4 ml-2",children:[(0,s.jsx)("span",{children:v}),!!t.title&&(0,s.jsxs)("span",{className:"hidden md:inline",children:[": ",t.title]})]})]}),r&&(0,s.jsxs)(n(),{href:"/r3/".concat(l,"/").concat(h),className:"flex flex-row items-center bg-gray-200 text-gray-700 border-gray-400 py-2 px-4 border-b-4 hover:bg-gray-300 ".concat(m),tabIndex:11,ref:c,children:[(0,s.jsxs)("span",{className:"ml-4 mr-2",children:[(0,s.jsx)("span",{children:h}),!!r.title&&(0,s.jsxs)("span",{className:"hidden md:inline",children:[": ",r.title]})]}),(0,s.jsx)("svg",{className:"w-6 h-6 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 5l7 7-7 7"})})]})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[874,353,843,441,684,358],()=>t(4974)),_N_E=e.O()}]);